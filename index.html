<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Iblis Web Scanner</title>
  <style>
    body {
      background: #000;
      color: #f00;
      font-family: monospace;
      padding: 20px;
    }
    .light-mode {
      background: #fff;
      color: #000;
    }
    input, button {
      padding: 10px;
      margin: 5px 5px 10px 0;
      background: #111;
      color: #f00;
      border: 1px solid #f00;
    }
    .light-mode input, .light-mode button {
      background: #eee;
      color: #000;
      border: 1px solid #000;
    }
    .url-box {
      background: #111;
      margin: 10px 0;
      padding: 10px;
      border-radius: 5px;
    }
    .light-mode .url-box {
      background: #ddd;
    }
    pre {
      font-size: 12px;
      white-space: pre-wrap;
    }
  </style>
</head>
<body>
  <h1>Scan Iblis</h1>
  <input id="dork" placeholder="Contoh: inurl:php?id= site:go.id" style="width:60%">
  <button onclick="cari()">Dork Google</button>
  <button onclick="scanSemua()">Scan Semua URL</button>
  <button onclick="toggleMode()">Ganti Mode</button>

  <div id="hasil"></div>

  <script>
    let urlList = [];

    function toggleMode() {
      document.body.classList.toggle('light-mode');
    }

    async function cari() {
      const dork = document.getElementById('dork').value;
      const hasil = document.getElementById('hasil');
      hasil.innerHTML = 'Loading...';
      urlList = [];

      const proxyURL = 'https://corsproxy.io/?' + encodeURIComponent(`https://www.google.com/search?q=${encodeURIComponent(dork)}`);

      try {
        const res = await fetch(proxyURL);
        const html = await res.text();
        const matches = [...html.matchAll(/<a href="\/url\?q=([^&]+)&/g)];
        urlList = matches.map(m => decodeURIComponent(m[1])).filter(u => u.startsWith("http"));
        if (urlList.length === 0) {
          hasil.innerHTML = 'Tidak ada hasil ditemukan.';
          return;
        }

        hasil.innerHTML = '<h3>Hasil URL:</h3>';
        urlList.forEach((link, i) => {
          hasil.innerHTML += `
            <div class="url-box" id="box-${i}">
              <b>${i+1}. <a href="${link}" target="_blank">${link}</a></b><br>
              <div id="vuln-${i}">Belum discan.</div>
            </div>`;
        });
      } catch (err) {
        hasil.innerHTML = 'Gagal mengambil hasil. Coba lagi.';
      }
    }

    function scanSemua() {
      if (urlList.length === 0) return alert("Cari dork dulu!");
      urlList.forEach((url, i) => {
        const targetDiv = document.getElementById(`vuln-${i}`);
        targetDiv.innerHTML = 'Scanning...';

        setTimeout(() => {
          const results = simulateScan(url);
          targetDiv.innerHTML = `<pre>${results}</pre>`;
        }, 1000 + Math.random() * 1000);
      });
    }

    function simulateScan(url) {
      const vulnerabilities = [
        "SQL Injection", "Cross Site Scripting (XSS)", "Cross Site Request Forgery (CSRF)",
        "Remote File Inclusion (RFI)", "Local File Inclusion (LFI)", "Command Injection",
        "Open Redirect", "XML External Entity (XXE)", "Server Side Request Forgery (SSRF)",
        "Clickjacking", "CORS Misconfig", "CSP Bypass", "XML-RPC Enabled"
      ];
      return vulnerabilities.map(v => {
        const status = Math.random() > 0.6 ? "VULNERABLE" : "SAFE";
        return `${v}: ${status}`;
      }).join('\n');
    }
  </script>
</body>
</html>
